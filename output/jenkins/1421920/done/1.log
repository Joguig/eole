Machine daily 2.9.0 : ciUpdateDaily BUILD_DAILY
Machine daily 2.9.0 : ciSetHttpProxy, pas de proxy pour les Daily
Machine daily 2.9.0 : liste des noyaux
-rw------- 1 root root 11712616 sept. 27 13:23 /boot/vmlinuz-5.15.0-125-generic
-rw------- 1 root root 11711784 nov.   6 09:47 /boot/vmlinuz-5.15.0-126-generic
Machine daily 2.9.0 : * espaces disponibles
Sys. de fichiers               Type Taille Utilis√© Dispo Uti% Mont√© sur
/dev/mapper/amonecole--vg-root ext4    11G    4,9G  5,1G  49% /
/dev/sda3                      ext4   756M    268M  434M  39% /boot
/dev/mapper/amonecole--vg-home ext4   2,1G     62k  2,1G   1% /home
/dev/sda1                      vfat    67M     11M   56M  17% /boot/efi
/dev/mapper/amonecole--vg-opt  ext4    21G    8,3G   12G  42% /opt
/dev/mapper/amonecole--vg-var  ext4    16G    4,8G   11G  32% /var
Machine daily 2.9.0 : ciSetHttpProxy, pas de proxy pour les Daily
Machine daily 2.9.0 : dpkg --configure -a
Machine daily 2.9.0 : ciTestHttp : Test acc√©s d√©pot 'http://ftp.crihan.fr/ubuntu/dists' : OK
Machine daily 2.9.0 : ciTestHttp : Test acc√©s d√©pot 'http://eole.ac-dijon.fr/ubuntu/dists' : OK
Machine daily 2.9.0 : ciTestHttp : Test acc√©s d√©pot 'http://test-eole.ac-dijon.fr/ubuntu/dists' : OK
Machine daily 2.9.0 : Maj-Auto RC
*********************************************
Machine daily 2.9.0 : (py3) ciMonitor maj_auto

monitor_maj_auto: pas de config.eol, donc utilise '-i' !

MONITOR: Maj-Auto  -i -S test-eole.ac-dijon.fr -V test-eole.ac-dijon.fr  -C
Mise √† jour le jeudi 12 d√©cembre 2024 17:12:03
Ex√©cution des scripts /usr/share/eole/majauto_pre
run-parts: executing /usr/share/eole/majauto_pre/clean
run-parts: executing /usr/share/eole/majauto_pre/mitm
run-parts: executing /usr/share/eole/majauto_pre/update_containers

Gestion des images de conteneur

Toutes les images sont √† jour

*** amonecole 2.9.0 ***

[33mMaj-Auto - (VERSION CANDIDATE) - Augmenter le niveau de mise √† jour est irr√©versible.[0m
Voulez-vous continuer ? [oui/non]
[non] : 
MONITOR: maj_auto_241a action:oui
oui
Action check pour le conteneur internet                                   [|]/]-]\]|]   
Action check pour le conteneur bdd                                        [|]/]-]\]|]   
Action check pour le conteneur reseau                                     [|]/]-]\]|]   
Action check pour le conteneur partage                                    [|]/]-]\]|]   
Action check pour le conteneur addc                                       [|]/]-]\]|]   
Configuration du d√©p√¥t Ubuntu avec la source eole.ac-dijon.fr
Configuration du d√©p√¥t EOLE avec la source test-eole.ac-dijon.fr
Configuration du d√©p√¥t Envole avec la source test-eole.ac-dijon.fr
Action update pour root                                                   [|]/]-]\]|]/]-]\]|]/]-]\]|]/]-]\]|]/]-]\]|]/]-]\]|]/]-]\]   
Action update pour le conteneur internet                                  [|]/]   
Action update pour le conteneur bdd                                       [|]/]   
Action update pour le conteneur reseau                                    [|]/]   
Action update pour le conteneur partage                                   [|]/]   
Action update pour le conteneur addc                                      [|]/]   
Action list-upgrade pour root
Action list-upgrade pour le conteneur internet                            [|]/]-]\]|]/]-]\]|]   
Action list-upgrade pour le conteneur bdd                                 [|]/]-]\]|]/]-]\]|]/]   
Action list-upgrade pour le conteneur reseau                              [|]/]-]\]|]/]-]\]|]   
Action list-upgrade pour le conteneur partage                             [|]/]-]\]|]/]-]\]|]   
Action list-upgrade pour le conteneur addc                                [|]/]-]\]|]/]-]\]|]   
0 nouveau, 7 mis √† jour, 0 √† enlever
Paquets √† mettre √† jour : 
    dmidecode (3.3-3ubuntu0.2) (root)
    eole-ntp-server (2.9.0-6) (root)
    eole-ntp-server-pkg (2.9.0-6) (addc)
    gir1.2-packagekitglib-1.0 (1.2.5-2ubuntu3) (root)
    libpackagekit-glib2-18 (1.2.5-2ubuntu3) (root)
    packagekit (1.2.5-2ubuntu3) (root)
    packagekit-tools (1.2.5-2ubuntu3) (root)
Action download-upgrade pour root
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
Calcul de la mise √† jour‚Ä¶
Les paquets suivants seront mis √† jour¬†:
  dmidecode eole-ntp-server gir1.2-packagekitglib-1.0 libpackagekit-glib2-18
  packagekit packagekit-tools
6 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
Il est n√©cessaire de prendre 696 ko dans les archives.
Apr√®s cette op√©ration, 4‚ÄØ096 o d'espace disque suppl√©mentaires seront utilis√©s.
R√©ception de¬†:1 http://test-eole.ac-dijon.fr/eole eole-2.9.0-proposed-updates/main amd64 eole-ntp-server all 2.9.0-6 [8‚ÄØ506 B]
R√©ception de¬†:2 http://eole.ac-dijon.fr/ubuntu jammy-updates/main amd64 dmidecode amd64 3.3-3ubuntu0.2 [68,5 kB]
R√©ception de¬†:3 http://eole.ac-dijon.fr/ubuntu jammy-updates/main amd64 libpackagekit-glib2-18 amd64 1.2.5-2ubuntu3 [124 kB]
R√©ception de¬†:4 http://eole.ac-dijon.fr/ubuntu jammy-updates/main amd64 gir1.2-packagekitglib-1.0 amd64 1.2.5-2ubuntu3 [25,3 kB]
R√©ception de¬†:5 http://eole.ac-dijon.fr/ubuntu jammy-updates/main amd64 packagekit-tools amd64 1.2.5-2ubuntu3 [28,8 kB]
R√©ception de¬†:6 http://eole.ac-dijon.fr/ubuntu jammy-updates/main amd64 packagekit amd64 1.2.5-2ubuntu3 [442 kB]
696 ko r√©ceptionn√©s en 0s (2‚ÄØ808 ko/s)
T√©l√©chargement achev√© et dans le mode t√©l√©chargement uniquement
Action download-upgrade pour le conteneur internet
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
Calcul de la mise √† jour‚Ä¶
0 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
Action download-upgrade pour le conteneur bdd
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
Calcul de la mise √† jour‚Ä¶
0 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
Action download-upgrade pour le conteneur reseau
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
Calcul de la mise √† jour‚Ä¶
Le paquet suivant a √©t√© install√© automatiquement et n'est plus n√©cessaire¬†:
  libgnutls-openssl27
Veuillez utiliser ¬´¬†apt autoremove¬†¬ª pour le supprimer.
0 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
Action download-upgrade pour le conteneur partage
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
Calcul de la mise √† jour‚Ä¶
0 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
Action download-upgrade pour le conteneur addc
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
Calcul de la mise √† jour‚Ä¶
Les paquets suivants seront mis √† jour¬†:
  eole-ntp-server-pkg
1 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
Il est n√©cessaire de prendre 3‚ÄØ810 o dans les archives.
Apr√®s cette op√©ration, 0 o d'espace disque suppl√©mentaires seront utilis√©s.
R√©ception de¬†:1 http://test-eole.ac-dijon.fr/eole eole-2.9.0-proposed-updates/main amd64 eole-ntp-server-pkg all 2.9.0-6 [3‚ÄØ810 B]
3‚ÄØ810 o r√©ceptionn√©s en 0s (276 ko/s)
T√©l√©chargement achev√© et dans le mode t√©l√©chargement uniquement
Action dist-upgrade pour root
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
Calcul de la mise √† jour‚Ä¶
Les paquets suivants seront mis √† jour¬†:
  dmidecode eole-ntp-server gir1.2-packagekitglib-1.0 libpackagekit-glib2-18
  packagekit packagekit-tools
6 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
Il est n√©cessaire de prendre 0 o/696 ko dans les archives.
Apr√®s cette op√©ration, 4‚ÄØ096 o d'espace disque suppl√©mentaires seront utilis√©s.
(Lecture de la base de donn√©es... (Lecture de la base de donn√©es... 5%(Lecture de la base de donn√©es... 10%(Lecture de la base de donn√©es... 15%(Lecture de la base de donn√©es... 20%(Lecture de la base de donn√©es... 25%(Lecture de la base de donn√©es... 30%(Lecture de la base de donn√©es... 35%(Lecture de la base de donn√©es... 40%(Lecture de la base de donn√©es... 45%(Lecture de la base de donn√©es... 50%(Lecture de la base de donn√©es... 55%(Lecture de la base de donn√©es... 60%(Lecture de la base de donn√©es... 65%(Lecture de la base de donn√©es... 70%(Lecture de la base de donn√©es... 75%(Lecture de la base de donn√©es... 80%(Lecture de la base de donn√©es... 85%(Lecture de la base de donn√©es... 90%(Lecture de la base de donn√©es... 95%(Lecture de la base de donn√©es... 100%(Lecture de la base de donn√©es... 190996 fichiers et r√©pertoires d√©j√† install√©s.)
Pr√©paration du d√©paquetage de .../0-dmidecode_3.3-3ubuntu0.2_amd64.deb ...
D√©paquetage de dmidecode (3.3-3ubuntu0.2) sur (3.3-3ubuntu0.1) ...
Pr√©paration du d√©paquetage de .../1-eole-ntp-server_2.9.0-6_all.deb ...
D√©paquetage de eole-ntp-server (2.9.0-6) sur (2.9.0-5) ...
Pr√©paration du d√©paquetage de .../2-libpackagekit-glib2-18_1.2.5-2ubuntu3_amd64.deb ...
D√©paquetage de libpackagekit-glib2-18:amd64 (1.2.5-2ubuntu3) sur (1.2.5-2ubuntu2) ...
Pr√©paration du d√©paquetage de .../3-gir1.2-packagekitglib-1.0_1.2.5-2ubuntu3_amd64.deb ...
D√©paquetage de gir1.2-packagekitglib-1.0 (1.2.5-2ubuntu3) sur (1.2.5-2ubuntu2) ...
Pr√©paration du d√©paquetage de .../4-packagekit-tools_1.2.5-2ubuntu3_amd64.deb ...
D√©paquetage de packagekit-tools (1.2.5-2ubuntu3) sur (1.2.5-2ubuntu2) ...
Pr√©paration du d√©paquetage de .../5-packagekit_1.2.5-2ubuntu3_amd64.deb ...
D√©paquetage de packagekit (1.2.5-2ubuntu3) sur (1.2.5-2ubuntu2) ...
Param√©trage de libpackagekit-glib2-18:amd64 (1.2.5-2ubuntu3) ...
Param√©trage de gir1.2-packagekitglib-1.0 (1.2.5-2ubuntu3) ...
Param√©trage de eole-ntp-server (2.9.0-6) ...
Param√©trage de packagekit (1.2.5-2ubuntu3) ...
Param√©trage de dmidecode (3.3-3ubuntu0.2) ...
Param√©trage de packagekit-tools (1.2.5-2ubuntu3) ...
Traitement des actions diff√©r√©es (¬´¬†triggers¬†¬ª) pour man-db (2.10.2-1)¬†...
Traitement des actions diff√©r√©es (¬´¬†triggers¬†¬ª) pour dbus (1.12.20-2ubuntu4.1)¬†...
Traitement des actions diff√©r√©es (¬´¬†triggers¬†¬ª) pour libc-bin (2.35-0ubuntu3.8)¬†...
NEEDRESTART-VER: 3.5
NEEDRESTART-KCUR: 5.15.0-126-generic
NEEDRESTART-KEXP: 5.15.0-126-generic
NEEDRESTART-KSTA: 1
Action dist-upgrade pour le conteneur internet
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
Calcul de la mise √† jour‚Ä¶
0 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
Action dist-upgrade pour le conteneur bdd
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
Calcul de la mise √† jour‚Ä¶
0 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
Action dist-upgrade pour le conteneur reseau
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
Calcul de la mise √† jour‚Ä¶
Le paquet suivant a √©t√© install√© automatiquement et n'est plus n√©cessaire¬†:
  libgnutls-openssl27
Veuillez utiliser ¬´¬†apt autoremove¬†¬ª pour le supprimer.
0 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
Action dist-upgrade pour le conteneur partage
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
Calcul de la mise √† jour‚Ä¶
0 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
Action dist-upgrade pour le conteneur addc
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
Calcul de la mise √† jour‚Ä¶
Les paquets suivants seront mis √† jour¬†:
  eole-ntp-server-pkg
1 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
Il est n√©cessaire de prendre 0 o/3‚ÄØ810 o dans les archives.
Apr√®s cette op√©ration, 0 o d'espace disque suppl√©mentaires seront utilis√©s.
(Lecture de la base de donn√©es... (Lecture de la base de donn√©es... 5%(Lecture de la base de donn√©es... 10%(Lecture de la base de donn√©es... 15%(Lecture de la base de donn√©es... 20%(Lecture de la base de donn√©es... 25%(Lecture de la base de donn√©es... 30%(Lecture de la base de donn√©es... 35%(Lecture de la base de donn√©es... 40%(Lecture de la base de donn√©es... 45%(Lecture de la base de donn√©es... 50%(Lecture de la base de donn√©es... 55%(Lecture de la base de donn√©es... 60%(Lecture de la base de donn√©es... 65%(Lecture de la base de donn√©es... 70%(Lecture de la base de donn√©es... 75%(Lecture de la base de donn√©es... 80%(Lecture de la base de donn√©es... 85%(Lecture de la base de donn√©es... 90%(Lecture de la base de donn√©es... 95%(Lecture de la base de donn√©es... 100%(Lecture de la base de donn√©es... 27337 fichiers et r√©pertoires d√©j√† install√©s.)
Pr√©paration du d√©paquetage de .../eole-ntp-server-pkg_2.9.0-6_all.deb ...
D√©paquetage de eole-ntp-server-pkg (2.9.0-6) sur (2.9.0-5) ...
Param√©trage de eole-ntp-server-pkg (2.9.0-6) ...
Mise √† jour OK
[33mMaj-Auto - Un ou plusieurs paquets ont √©t√© mis √† jour, utilisez la commande [reconfigure] pour que les modifications soient prises en compte.[0m

MONITOR: Maj-Auto  -i -S test-eole.ac-dijon.fr -V test-eole.ac-dijon.fr  -C eole -D envole
Mise √† jour le jeudi 12 d√©cembre 2024 17:13:33
Ex√©cution des scripts /usr/share/eole/majauto_pre
run-parts: executing /usr/share/eole/majauto_pre/clean
run-parts: executing /usr/share/eole/majauto_pre/mitm
run-parts: executing /usr/share/eole/majauto_pre/update_containers

Gestion des images de conteneur

Toutes les images sont √† jour

*** amonecole 2.9.0 ***

[33mMaj-Auto -  envole (VERSION DE DEVELOPPEMENT) eole (VERSION CANDIDATE) - Augmenter le niveau de mise √† jour est irr√©versible.[0m
Voulez-vous continuer ? [oui/non]
[non] : 
MONITOR: maj_auto_241a action:oui
oui
Action check pour le conteneur internet                                   [|]/]-]\]|]/]-]   
Action check pour le conteneur bdd                                        [|]/]-]\]|]/]-]   
Action check pour le conteneur reseau                                     [|]/]-]\]|]/]-]   
Action check pour le conteneur partage                                    [|]/]-]\]|]/]-]   
Action check pour le conteneur addc                                       [|]/]-]\]|]/]-]   
Configuration du d√©p√¥t Ubuntu avec la source eole.ac-dijon.fr
Configuration du d√©p√¥t EOLE avec la source test-eole.ac-dijon.fr
Configuration du d√©p√¥t Envole avec la source test-eole.ac-dijon.fr
Action update pour root                                                   [|]/]-]\]|]/]-]\]|]/]-]\]|]/]-]\]|]/]-]\]|]/]-]\]|]   
Action update pour le conteneur internet                                  [|]/]   
Action update pour le conteneur bdd                                       [|]/]   
Action update pour le conteneur reseau                                    [|]/]   
Action update pour le conteneur partage                                   [|]/]   
Action update pour le conteneur addc                                      [|]/]   
Action list-upgrade pour root
Action list-upgrade pour le conteneur internet                            [|]/]-]\]|]/]-]\]|]/]   
Action list-upgrade pour le conteneur bdd                                 [|]/]-]\]|]/]-]\]   
Action list-upgrade pour le conteneur reseau                              [|]/]-]\]|]/]-]\]|]   
Action list-upgrade pour le conteneur partage                             [|]/]-]\]|]/]-]\]|]   
Action list-upgrade pour le conteneur addc                                [|]/]-]\]|]/]-]\]|]   
Mise √† jour OK
Aucun paquet √† installer.
Machine daily 2.9.0 : ciMonitor python3 ==> RESULT=0
--------------------------------------------
cat /etc/apt/sources.list

# Ubuntu
deb [ arch=amd64 ] http://eole.ac-dijon.fr/ubuntu jammy main universe multiverse restricted
deb [ arch=amd64 ] http://eole.ac-dijon.fr/ubuntu jammy-security main universe multiverse restricted
deb [ arch=amd64 ] http://eole.ac-dijon.fr/ubuntu jammy-updates main universe multiverse restricted

# EOLE
deb [ arch=amd64 ] http://test-eole.ac-dijon.fr/eole eole-2.9.0 main cloud
deb [ arch=amd64 ] http://test-eole.ac-dijon.fr/eole eole-2.9.0-security main cloud
deb [ arch=amd64 ] http://test-eole.ac-dijon.fr/eole eole-2.9.0-updates main cloud
deb [ arch=amd64 ] http://test-eole.ac-dijon.fr/eole eole-2.9.0-proposed-updates main cloud

# Envole
deb [ arch=amd64 ] http://test-eole.ac-dijon.fr/envole envole-9-unstable main
--------------------------------------------
--------------------------------------------
cat /etc/apt/sources.list.d/additional.list
#template genere par Maj-Auto
#
--------------------------------------------
Machine daily 2.9.0 : GenConteneur
*********************************************
* Test conteneurs ? 
*********************************************
* /opt/lxc ? 
total 20
drwxrwx--- 3 root root 4096 oct.  16 16:33 addc
drwxrwx--- 3 root root 4096 oct.  16 16:32 bdd
drwxrwx--- 3 root root 4096 oct.  16 16:32 internet
drwxrwx--- 3 root root 4096 oct.  16 16:32 partage
drwxrwx--- 3 root root 4096 oct.  16 16:32 reseau
* /var/lib/lxc ? 
lrwxrwxrwx 1 root root 8 oct.  16 16:28 /var/lib/lxc -> /opt/lxc
LIST_CONTENEUR=addc    
bdd     
internet
partage 
reseau  
*********************************************
* Conteneurs d√©j√† install√© dans /opt/lxc ? 
*********************************************
[32mconteneur internet accessible
[39;49m[32mconteneur bdd accessible
[39;49m[32mconteneur reseau accessible
[39;49m[32mconteneur partage accessible
[39;49m[32mconteneur addc accessible
[39;49m* source list ubuntu-proposed.list inexistant, pas de copie dans les conteneurs
Machine daily 2.9.0 : Pas de fichier startup '/mnt/eole-ci-tests/module/UpdateDaily-amonecole.sh' 
Machine daily 2.9.0 : Test CVE Noyau
0
Machine daily 2.9.0 : autoremove pour les anciens noyaux
Lecture des listes de paquets‚Ä¶
Construction de l'arbre des d√©pendances‚Ä¶
Lecture des informations d'√©tat‚Ä¶
0 mis √† jour, 0 nouvellement install√©s, 0 √† enlever et 0 non mis √† jour.
/usr/bin/updatedb
Machine daily 2.9.0 : * Execute updatedb
/usr/bin/shellcheck
Machine daily 2.9.0 : Tag l'Image Daily
DAILY_CONTAINER=oui
DAILY_DATEUPDATE=1734023676
DAILY_DATE='2024-12-12 17:14'
DAILY_MAJAUTO=RC
Machine daily 2.9.0 : Check Update Service
/etc/systemd/system/EoleCiTestsContext.service A JOUR
CheckUpdateService.sh: systemctl enable 'EoleCiTestsContext.service'
Removed /etc/systemd/system/network.target.wants/EoleCiTestsContext.service.
Created symlink /etc/systemd/system/network.target.wants/EoleCiTestsContext.service ‚Üí /etc/systemd/system/EoleCiTestsContext.service.
CheckUpdateService.sh: systemctl daemon-reload
/etc/systemd/system/EoleCiTestsDaemon.service A JOUR
CheckUpdateService.sh: systemctl enable 'EoleCiTestsDaemon.service'
Removed /etc/systemd/system/multi-user.target.wants/EoleCiTestsDaemon.service.
Created symlink /etc/systemd/system/multi-user.target.wants/EoleCiTestsDaemon.service ‚Üí /etc/systemd/system/EoleCiTestsDaemon.service.
CheckUpdateService.sh: systemctl daemon-reload
Machine daily 2.9.0 : Trim disk
Machine daily 2.9.0 : ciUpdateDaily RC : OK
